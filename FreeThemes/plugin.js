(()=>{var s=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var i=Object.prototype.hasOwnProperty;var h=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,m)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of l(t))!i.call(e,n)&&n!==r&&s(e,n,{get:()=>t[n],enumerable:!(m=a(t,n))||m.enumerable});return e};var f=e=>y(s({},"__esModule",{value:!0}),e);var b={};h(b,{onLoad:()=>p,onUnload:()=>T});var o=shelter.plugin.store,c=[];function d(e){return Array.from(e.classList).find(t=>t.startsWith("theme-"))}function u(){if(!o.themeData||!o.themeType)return;let e=document.querySelector('style[free-themes="true"]');e||(e=document.createElement("style"),e.setAttribute("free-themes","true"),document.body.appendChild(e)),e.innerText=o.themeData,document.body.classList.remove(d(document.body)),document.body.classList.add(o.themeType)}function p(){document.body.classList.add("custom-theme-background"),c.push(shelter.flux.intercept(e=>{e?.event=="client_theme_updated"&&setTimeout(()=>{o.themeData=document.querySelector('style[data-client-themes="true"]').innerText,o.themeType=d(document.documentElement),u()},100)})),u()}function T(){c.forEach(e=>e()),document.querySelector('style[free-themes="true"]').remove(),document.body.classList.remove(o.themeType)}return f(b);})();
